<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Module 1 – Project Archive</title>
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/three@0.128.0/examples/js/controls/OrbitControls.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Mapbox GL JS styles -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />

    <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>

  <!-- Google Font -->
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;700&display=swap" rel="stylesheet">

  <!-- CSS File -->
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <header>
    <div class="left">Columbia GSAPP</div>
    <div class="center">
      Computational Design Practices<br>
      Mika Yassur<br>
      <span>Workflows Project Archive</span>
    </div>
<div class="right"><a href="about.html">About</a></div>
  </header>

  <div class="gallery">
    <button class="arrow left" onclick="prevProject()">&#8592;</button>

    <div class="canvas-wrapper">
      <!-- p5 sketches -->
      <div class="project" id="project-1">
        <div id="canvas-container-1"></div>
      </div>
      <div class="project" id="project-2" style="display:none;">
        <div id="canvas-container-2"></div>
      </div>

      <!-- three.js scenes -->
      <div class="project" id="project-4" style="display:none;">
        <div id="three-container-1"></div>
      </div>
      <div class="project" id="project-5" style="display:none;">
        <div id="three-container-2"></div>
      </div>
    

  <!-- temporal canvas -->
   <div class="project" id="project-6" style="display:none;">
   <h2>Philosophical Periods Timeline</h2>
  <canvas id="timelineChart" width="1000" height="600"></canvas>
<p style="font-size: 0.9rem; color: #555; margin-top: 1rem;">
  Data source: <a href="https://en.wikipedia.org/wiki/History_of_philosophy" target="_blank">Wikipedia - History of Philosophy</a>
</p>
</div>

  <!-- nodal network / relational structutre -->
<div class="project" id="project-7" style="display:none;">
  <svg id="network"></svg>
</div>

  <!-- geospatial structure -->
<div class="project" id="project-8" style="display:none;">
  <div id="controls">
    <input type="text" id="searchFeature" placeholder="Search address..." />
    <button id="fitToData">Fit to Data (F)</button>
    <button id="resetFilters">Reset Filters (R)</button>
  </div>
  <div id="map-title">Buildings with cornices in Ridgewood, Queens</div>
  <div id="mapbox-container-3"></div>  
</div>

<div class="project" id="project-9" style="display:none;">
  <!-- Poll question -->
      <div class="poll-question">
        <h3>Are you where you need to be?</h3>
      </div>

      <!-- Vote buttons -->
      <div class="vote-buttons">
        <button class="vote-btn vote-yes" id="vote-yes">
          <span class="vote-text">Yes</span>
          <span class="vote-count" id="yes-count">0</span>
        </button>

        <button class="vote-btn vote-no" id="vote-no">
          <span class="vote-text">No</span>
          <span class="vote-count" id="no-count">0</span>
        </button>
      </div>

      <!-- Follow-up question (hidden initially) -->
      <div id="follow-up-container" style="display: none; margin-top: 20px;">
        <label for="follow-up-input">How come?</label><br>
        <input type="text" id="follow-up-input" placeholder="Type your answer here..." style="width: 100%; max-width: 400px; padding: 8px;"><br>
        <button id="submit-follow-up" style="margin-top: 10px;">Submit</button>
      </div>

      <!-- Total votes display -->
      <div class="total-votes">
        <p>Total votes: <span id="total-votes">0</span></p>
      </div>
    </div>
  </p>
</div>

</div>
    <button class="arrow right" onclick="nextProject()">&#8594;</button>
  </div>

  <!-- p5 sketches -->
  <script src="sketch1.js"></script>
  <script src="sketch2.js"></script>

  <!-- three.js scenes -->
  <script src="threeScene1.js"></script>
  <script src="threeScene2.js"></script>

  <!-- temporal canvas -->
  <script src="script3.js"></script>

    <!-- Mapbox GL JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  
  <!-- Your JavaScript (this assumes it's saved as mapBox_Sketch_03.js) -->
  <script src="mapBox_Sketch_03.js"></script>

<!-- JS for engagement components -->
    <script src="poll-app.js"></script>

  <script>
    // Keeps track of which project is currently visible
let currentIndex = 0;
// Collects all project panels (<div class="project"> elements)
const projects = document.querySelectorAll('.project');

/* -------------------------------
   Function: showProject(index)
   - Displays only the project at the given index
   - Hides all other projects
   - Handles map resize logic for the Mapbox project
--------------------------------*/
function showProject(index) {
  console.log(`Showing project ${index}`);
  projects.forEach((p, i) => {
    p.style.display = (i === index) ? 'block' : 'none';
  });
  
  // If we're showing the map project (project-8), resize the map
  if (index === 6) { // index 6 = project-8
    console.log('Map project selected, checking for map3...');
    const mapContainer = document.getElementById('mapbox-container-3');
    console.log('Map container dimensions:', {
      width: mapContainer.offsetWidth,
      height: mapContainer.offsetHeight,
      display: window.getComputedStyle(mapContainer).display
    });
    
    // Multiple resize attempts to ensure it works
    if (window.map3) {
      console.log('window.map3 found, resizing multiple times...');
      
      // Immediate resize
      window.map3.resize();
      
      // Resize after short delay
      setTimeout(() => {
        window.map3.resize();
        console.log('First resize done');
      }, 50);
      
      // Resize after longer delay (for flex layout to settle)
      setTimeout(() => {
        window.map3.resize();
        console.log('Second resize done');
      }, 200);
      
      // Final resize
      setTimeout(() => {
        window.map3.resize();
        console.log('Final resize done');
      }, 500);
    }
  }
}

//Function: prevProject(): Moves one project back in the list & wraps to the last project if at the beginning
function prevProject() {
  currentIndex = (currentIndex - 1 + projects.length) % projects.length;
  showProject(currentIndex);
}

function nextProject() {
  currentIndex = (currentIndex + 1) % projects.length;
  showProject(currentIndex);
}

// Check if projects are found
console.log(`Found ${projects.length} projects:`, projects);

// Check if mapbox container exists
const mapContainer = document.getElementById('mapbox-container-3');
console.log('Mapbox container found:', mapContainer);

// temporal canvas script
// defining philosophical periods 
const events = [
  { name: 'Presocratic (Ancient Greek)', start: -600, end: -400, location: 'Ancient Greece' },
  { name: 'Classical Greek (Socrates–Aristotle)', start: -469, end: -322, location: 'Ancient Greece' },
  { name: 'Hellenistic/Roman', start: -322, end: 529, location: 'Greece/Rome' },
  { name: 'Medieval (Western)', start: 400, end: 1500, location: 'Western Europe' },
  { name: 'Renaissance', start: 1350, end: 1600, location: 'Italy/Western Europe' },
  { name: 'Early Modern', start: 1600, end: 1800, location: 'Western Europe' },
  { name: 'Enlightenment', start: 1650, end: 1800, location: 'Western Europe' },
  { name: '19th-Century', start: 1800, end: 1900, location: 'Europe/America' },
  { name: '20th-Century', start: 1900, end: 2000, location: 'Global' },
  { name: 'Arabic–Persian Classical', start: 800, end: 1200, location: 'Middle East' },
  { name: 'Arabic–Persian Post‑Classical', start: 1200, end: 1600, location: 'Middle East' },
  { name: 'Indian Ancient', start: -900, end: -200, location: 'India' },
  { name: 'Indian Classical & Medieval', start: -200, end: 1800, location: 'India' },
  { name: 'Indian Modern', start: 1800, end: 2025, location: 'India' },
  { name: 'Chinese Early', start: -500, end: 221, location: 'China' },
  { name: 'Chinese Han–Song', start: 221, end: 960, location: 'China' },
  { name: 'Neo‑Confucian', start: 960, end: 1800, location: 'China' },
  { name: 'Chinese Modern', start: 1800, end: 2025, location: 'China' }
];
// assigning colors to each period
const colors = {
  'Ancient Greece': '#0077b6',
  'Greece/Rome': '#0096c7',
  'Western Europe': '#00b4d8',
  'Italy/Western Europe': '#48cae4',
  'Europe/America': '#90e0ef',
  'Global': '#ade8f4',
  'Middle East': '#ff6f61',
  'India': '#ffd166',
  'China': '#06d6a0'
};
// Extract names for chart labels
const labels = events.map(e => e.name);
// Prepare dataset (start-end years mapped to horizontal bars)
const data = events.map((e, i) => ({
  x: [e.start, e.end],
  y: e.name,
  backgroundColor: colors[e.location] || '#ccc'
}));

// Chart.js Timeline Rendering
new Chart(document.getElementById('timelineChart'), {
  type: 'bar',
  data: {
    labels,
    datasets: [{
      label: 'Philosophical Periods',
      data: events.map(e => ({ x: [e.start, e.end], y: e.name })),
      backgroundColor: events.map(e => colors[e.location] || '#888'),
      borderWidth: 1,
      barThickness: 16
    }]
  },
  options: {
    indexAxis: 'y',
    responsive: true,
    plugins: {
      legend: { display: false },
      tooltip: {
        callbacks: {
          label: ctx => {
            const ev = events[ctx.dataIndex];
            return `${ev.name}: ${ev.start} – ${ev.end} (${ev.location})`;
          }
        }
      }
    },
    scales: {
      x: {
        type: 'linear',
        title: { display: true, text: 'Year' },
        ticks: {
          callback: val => val < 0 ? `${-val} BCE` : `${val} CE`
        },
        min: -1000,
        max: 2100
      },
      y: {
        title: { display: true, text: 'Philosophical Period' }
      }
    }
  }
});
// end of temporal canvas script
  </script>
</body>
</html>